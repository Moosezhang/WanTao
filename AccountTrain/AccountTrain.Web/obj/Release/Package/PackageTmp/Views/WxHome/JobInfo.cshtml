
@{
     ViewBag.Title = "职位自荐";
}


<style>
	.table-list{
		margin-top: 15px;margin-bottom: 5px;width: 100%; position: relative;float: left;
            		background-color: #fafafa;
	}
	
	.td-first-left{
		font-size: 16px;float: left;margin-left: 15px;padding-top: 5px;
	}
	.td-first-right{
		color: #FF0000;float: right;margin-right: 15px;padding-top: 5px
	}
	.td-left{
		color: #999999;float: left;margin-left: 15px;padding-top: 5px
	}
	.td-right{
		color: #999999;float: right;margin-right: 15px;padding-top: 5px
	}
</style>

<head>
    <meta name="viewport" content="width=device-width" />
    <title>职位自荐</title>
</head>
<body>
  	<header data-am-widget="header" class="am-header am-header-default" style="background-color: white;">
	  <div class="am-header-left am-header-nav">
		    <a href="javascript:window.history.back(); " class="">
		  	<img class="am-header-icon-custom" src="~/Images/icon/返回.png" alt=""/>
		  </a>
	  </div>
	   <h3 class="am-header-title" style="float:left;color: black;padding-top: 15px;font-size: 18px;margin-right: 0px;">
          职位自荐
      </h3>
      <div class="am-input-group" style="padding-top: 5px;">	
	      <span class="am-input-group-btn" >
	      	<button class="am-btn" type="button" onclick="GoHome()" 
	        	style="background-color: white;border-color:white;float: right;">
	        	<div><img class="am-header-icon-custom" src="~/Images/icon/主页.png" style="height: 20px;" alt=""/></div>
	        </button>
	        
	      </span>
	    </div>
	</header>
  	<hr style="margin-top: 0px;"/>
  	<div id="job">
  		<div class="am-u-lg-6">
	    	<div class="am-input-group" >	      
		      <input type="text" v-model="txtTitle" class="am-form-field" style="border-top-left-radius:5px;border-bottom-left-radius:5px;float:left;" placeholder="输入要找的职位">
			      <span class="am-input-group-btn" >
			        <button class="am-btn am-btn-default" type="button" v-on:click="Query()" style="border-top-right-radius:5px;border-bottom-right-radius:5px;"><span class="am-icon-search"></span> </button>
			      </span>
		    </div>
	  	</div>  	
	  	<hr style="margin-top: 0px;"/>
        <div>
            <table class="table-list" v-for="item in jobList" v-on:click="GoDetail(item.JobId)">
            	
        		<tr>
                    <td class="td-first-left"><b>{{item.JobTitle}}</b></td>
                    <td class="td-first-right">{{item.JobSalary}}</td>
                </tr>
                <tr>	
                   <td class="td-left">{{item.JobYear}}|{{item.JobEducation}}</td>
                   <td class="td-right">{{item.CreateTime}}</td>
                </tr>
                <tr>
					<td class="td-left">{{item.JobCompany}}</td>
                    <td></td>
                </tr>
        	
               
            </table>
        </div>
  	</div>
  	
</body>


<script>
	var openid = '@ViewBag.Openid';
	var jobVue=new Vue({
		el:"#job",
		data:{
			jobList:[],
			txtTitle:""
		},
		created: function () {
                this.Query()
         },
         methods:{
         	Query:function () {  
			    var _self = this;
                var title = this.txtTitle;
                $.ajax({
                    type: "get",
                    dataType: "json",
                    contentType: "application/json",
                    url: "/WxHome/GetJobInfos?pGuid=" + guid(),
                    data: {
                        title:title
                    },
                    success: function (result) {
                        $.each(result, function(index,value) {
                    		var date=value.CreateTime;                    		
                    		var ncd=new Date(parseInt(date.substr(6, 13))); 
                    		var y = ncd.getFullYear();  
						    var m = ncd.getMonth() + 1;  
						    m = m < 10 ? '0' + m : m;  
						    var d = ncd.getDate();  
						    d = d < 10 ? ('0' + d) : d; 
                    		value.CreateTime=y + '-' + m + '-' + d;
                    	});
                        _self.jobList = result;
                    },
                    error: function (json) {
                        _self.$message.error('查询失败');
                    }
                });
			},
			GoDetail:function(jobId){				
				window.location.href = "JobInfoDetail?openid=" + openid+"&&jobId="+jobId;
			}
         }
	});
	
	 function guid() {
        function S4() {
            return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);
        }
        return (S4() + S4() + "-" + S4() + "-" + S4() + "-" + S4() + "-" + S4() + S4() + S4());
    }
	 
	 function GoHome()
	 {
	 	window.location.href = "/WxHome/Index?openid="+openid+"&&code=null&&state=null";
	 }
	
</script>
