@using BusinessEntity.Common;
@using AccountTrain.Web.Common;

@{
    /////设置菜单进入Session
    IList<SystemMenuInfo> SystemMenuInfo = null;
    SystemMenuInfo = Html.GetSystemMenuList();
}

@{
    var user = CacheManager.Instance.CurrentUser;
    string LoginName = user == null ? "" : user.Name;
}
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>后台管理系统</title>
    <link href='@Url.Content("~/Content/Site.css")' rel="stylesheet" />
    @Styles.Render("~/Content/elementui")
    @Styles.Render("~/Content/nprogress")
    @Scripts.Render("~/bundles/nprogress")
    @Scripts.Render("~/bundles/jquery")
    <script>
        $(function () {
            NProgress.configure({ ease: 'ease', speed: 500, showSpinner: false, });
            NProgress.start();
        });
    </script>
    <style>
        .el-submenu__title {
            text-align: left !important;
        }
    </style>
    @Scripts.Render("~/bundles/vue")
    @Scripts.Render("~/bundles/elementui")
</head>
<body>
    <div>
        <div style="background: #007ebc;height:70px;">
            <div>
                <div style="width:50%;float:left">
                    <h3 class="logo_block">后台管理系统</h3>
                </div>
                <div class="nav_add">
                    <ul>
                    	<li> <i class="ic_admin"></i><a style="cursor:default;" class="a-color">@LoginName</a></li>
                        <li>
                            <i class="ic_logout"></i>
                            <a href="javascript:document.getElementById('logForm').submit()">退出</a>
                            @using (Html.BeginForm("LogOff", "Account", new { area = "" }, FormMethod.Post, new { id = "logForm" }))
                            {
                            }
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div>
            <div style="width:15%; float:left">
                <div id="home">
                    <el-row class="tac">
                        <el-col span="24">
                            <el-menu default-active="1" v-bind:style="{height:contentHeight+ 'px'}" background-color="#545c64" text-color="#fff" active-text-color="#ffd04b">
                                @for (int i = 0; i < SystemMenuInfo.Count(); i++)
                                {
                                    <el-submenu index="@i">
                                        <template slot="title">
                                            <i class="el-icon-tickets"></i>
                                            <span style="font-size: 15px;">@SystemMenuInfo[i].MenuName</span>
                                        </template>
                                        <el-menu-item-group>
                                            @foreach (var submenu in SystemMenuInfo[i].SubMenus)
                                            {
                                                <el-menu-item>
                                                    <span slot="title">
                                                    	<a href="@submenu.Url" style="font-size: 13px;">@submenu.MenuName</a>
                                                    </span>
                                                </el-menu-item>
                                            }   
                                        </el-menu-item-group>
                                    </el-submenu>        
                                }
                                                       
                            </el-menu>
                        </el-col>
                    </el-row>
                </div>
            </div>
            <div id="content" style="width:85%; float:left">
            	@RenderBody()
		      	<!--<div id="container">
		      		<iframe src="" id="iframe"></iframe>
	          		
	       		</div>-->
	    	</div>
    </div>


    <script>
    	var menuVue;
        //var imainHeight = $(document).height() - 70;
        $(function () {
            NProgress.done();
            var menuVue = new Vue({
                el: "#home",
                data: {
                    isCollapse: true,
                    contentSrc: "",
                    contentWidth: "100%",
                    contentHeight: $(document).height() - 70,
                    activeIndex: "1",
                },
            });
            
           // $('#home ul li a').click(function () { 
			    //e.preventDefault();  // 阻止链接跳转
			   	//var url = this.href;  // 保存点击的地址
			 //  	var current = $(this),
			//	target = current.attr('target');
			 
			 //	$("#iframe").attr("src",target).ready();
			 
			   	//$("#container").load(target); //加载相对应的内容
	
//	 			var current = $(this),
//	            target = current.find('a').attr('target'); // 找到链接a中的targer的值  
//	                    
//	            $.get(target, function (data) {
//	                $("#mainContent").html(data);
//	            });
	
			//});
        })
        
        //$('#home ul li').on('click', function(e) { 
        
		

    </script>
</body>
</html>
